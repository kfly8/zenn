---
title: "反復処理"
---

## for文

for文を利用してリストの反復処理ができます。

```perl
my @numbers = 1 .. 10;

my $sum = 0;
for my $n (@numbers) {
  $sum += $n;
}
say $sum; # 55
```

Perl5.36から、`my ($x,$y,..) (LIST)`と書いて、一度に複数の要素を反復できます。

```perl
my @case = (
  apple  => 'APPLE',
  banana => 'BANANA',
  cherry => 'CHERRY',
);

for my ($input, $expected) (@case) {
  say uc($input) eq $expected ? 'OK' : 'NG';
}
```

[builtin::indexed](https://metacpan.org/pod/builtin#indexed)を利用すると、リストからインデックスと値のペアを取得できます。インデックスを利用した反復処理をしたい時に便利です。

```perl
my @fruits = qw(apple banana cherry);

for my ($i, $fruit) (indexed @fruits) {
  say "$i: $fruit";
}
```

後置for文も利用できます。ワンライナーを書く時に便利です。

```perl
% perl -E '$sum += $_ for 1..10; say $sum'
55
```

## 無限ループ

無限ループは、while文を利用することが多いです。

```perl
open my $fh, '<', $filepath;

# 行を取得できる限り処理を続ける
while (my $line = <$fh>) {
  say $line if $line =~ m/perl/i;
}
```

## ループ制御

nextで次の反復を開始します。

```perl
for my $i (1...10) {
  # 偶数の場合は処理をスキップ
  next if $i % 2 == 0;
  say $i;
}
```

lastで反復処理を即座に終了します。

```perl
my $i = 0;
while (true) {
  $i++;
  last if $i > 10;
  say $i;
}
```

## SEE ALSO

- [perlsyn](https://perldoc.jp/perlsyn)

